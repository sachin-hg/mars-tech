!function(){const e=["production","preprod"].includes((window._site.siteAppEnv||"").toLowerCase())?"https://api.flockmail.com/neo/website":"https://flockmail-backend.flock-staging.com/neo/website",t=new RegExp(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/),n=function(){let e=0;return function(t=""){e>=1e3&&(e=0);const n=Math.random().toString(36).substring(2,6);return`w_${(()=>{const e=new Date,t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getUTCDate().toString().padStart(2,"0")+t.getUTCHours().toString().padStart(2,"0")+t.getUTCMinutes().toString().padStart(2,"0")+t.getUTCSeconds().toString().padStart(2,"0")})()}_${t}_${e++}_${n}`}}(),r=(e="")=>document.querySelector(e),a=e=>"true"===e||"false"!==e&&e,s=()=>{r(".server-success").innerHTML=a(window._site.renderForPublish)?"Message sent successfully!":"This is a preview of your site. Visit live site to try sending message.",r("#form-site-contact [name=visitor-name]").value="",r("#form-site-contact [name=visitor-email]").value="",r("#form-site-contact [name=visitor-message]").value=""},i=()=>{const e=r("#form-site-contact button");e.disabled=!1,e.style.opacity=1,r(".contact-form-loader").style.display="none"},o=(e,n,a)=>{const s=(e=>{const t=e.trim();return t.length<=0?"Name is required":t.length>100?"Name cannot exceed 100 characters":null})(e),i=(e=>{const n=e.trim();return n.length<=0?"Email is required":n.length>100?"Email cannot exceed 100 characters":t.test(e)?null:"Email is incorrect"})(n),o=(e=>{const t=e.trim();return t.length<=0?"Message is required":t.length>500?"Message cannot exceed 500 characters":null})(a);return r(".name-err").innerHTML=s||"",r(".email-err").innerHTML=i||"",r(".msg-err").innerHTML=o||"",!s&&!i&&!o},c=t=>{r(".name-err").innerHTML="",r(".email-err").innerHTML="",r(".msg-err").innerHTML="",r(".server-success").innerHTML="",r(".server-error").innerHTML="";const c=r("#form-site-contact [name=visitor-name]").value,m=r("#form-site-contact [name=visitor-email]").value,l=r("#form-site-contact [name=visitor-message]").value;if(o(c,m,l)){(()=>{const e=r("#form-site-contact button");e.disabled=!0,e.style.opacity=.5,r(".contact-form-loader").style.display="inline-block"})();const{cleanName:t,cleanEmail:o,cleanMessage:d}=((e,t,n)=>({cleanName:e.trim(),cleanEmail:t.trim(),cleanMessage:n.trim()}))(c,m,l);(({name:t="",email:o="",message:c=""})=>{const{siteDomainName:m}=window._site||{},l={domainName:m,crid:n("site_contact"),name:t,email:o,message:c};a(window._site.renderForPublish)?fetch(`${e}/contact`,{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((async e=>{if(e.ok)sendMedusa("site_contact_submitted",{section:"Contact"}),s();else{const t=await e.json(),n=t.desc+" "+(t.parameter?`(${t.parameter})`:"")+" "+(t.error?`[${t.error}]`:"");r(".server-error").innerHTML=n.trim()||"Server Error"}})).finally((()=>{i()})):setTimeout((()=>{s(),i()}),2e3)})({name:t,email:o,message:d})}};document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#form-site-contact");e&&e.addEventListener("submit",(e=>{e.preventDefault(),c()}))}))}();